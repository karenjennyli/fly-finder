{"ast":null,"code":"import _regeneratorRuntime from\"/Users/karenli/Documents/Development/filght-search/finished-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/karenli/Documents/Development/filght-search/finished-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/karenli/Documents/Development/filght-search/finished-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'./AirportInfo.css';import Flights from'./Flights';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function AirportInfo(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),flights=_useState2[0],setFlights=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),places=_useState4[0],setPlaces=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),query=_useState6[0],setQuery=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),destQuery=_useState8[0],setDestQuery=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showFlights=_useState10[0],setShowFlights=_useState10[1];function handleSubmit(e){e.preventDefault();function fetchMyAPI(){return _fetchMyAPI.apply(this,arguments);}function _fetchMyAPI(){_fetchMyAPI=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var reqOptions,responseOrigin,originId,responseDest,destId,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:reqOptions={method:'GET',headers:{\"x-rapidapi-key\":\"9c838d17b0msh9d78bbfa4f324fbp109103jsn16509938ea2e\",\"x-rapidapi-host\":\"skyscanner-skyscanner-flight-search-v1.p.rapidapi.com\",\"useQueryString\":true}};_context.next=3;return fetch(\"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/US/USD/en-US/?\"+new URLSearchParams({query:query}),reqOptions);case 3:responseOrigin=_context.sent;_context.next=6;return responseOrigin.json();case 6:responseOrigin=_context.sent;originId=responseOrigin.Places[0].PlaceId;// loop through responseOrigin.Places array until get good length\nconsole.log(originId);if(!(originId.length!==7)){_context.next=11;break;}return _context.abrupt(\"return\");case 11:_context.next=13;return fetch(\"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/US/USD/en-US/?\"+new URLSearchParams({query:destQuery}),reqOptions);case 13:responseDest=_context.sent;_context.next=16;return responseDest.json();case 16:responseDest=_context.sent;destId=responseDest.Places[0].PlaceId;console.log(destId);if(!(destId.length!==7)){_context.next=21;break;}return _context.abrupt(\"return\");case 21:_context.next=23;return fetch(\"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/browsedates/v1.0/US/USD/en-US/\"+originId+\"/\"+destId+\"/2021-03-20?inboundpartialdate=2021-03-25\",reqOptions);case 23:response=_context.sent;_context.next=26;return response.json();case 26:response=_context.sent;console.log(response);setFlights(response.Quotes);setPlaces(response.Places);case 30:case\"end\":return _context.stop();}}},_callee);}));return _fetchMyAPI.apply(this,arguments);}fetchMyAPI();setShowFlights(true);setQuery(\"\");setDestQuery(\"\");}return/*#__PURE__*/_jsxs(\"div\",{className:\"airportinfo\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"queryInput\",children:\"Origin:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"queryInput\",value:query,onChange:function onChange(e){return setQuery(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"destQueryInput\",children:\"Destination:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"destQueryInput\",value:destQuery,onChange:function onChange(e){return setDestQuery(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"search\",children:\"Submit\"})]}),showFlights?/*#__PURE__*/_jsx(Flights,{flights:flights,places:places}):/*#__PURE__*/_jsx(_Fragment,{})]});}export default AirportInfo;","map":{"version":3,"sources":["/Users/karenli/Documents/Development/filght-search/finished-app/src/components/AirportInfo.js"],"names":["React","useState","Flights","AirportInfo","flights","setFlights","places","setPlaces","query","setQuery","destQuery","setDestQuery","showFlights","setShowFlights","handleSubmit","e","preventDefault","fetchMyAPI","reqOptions","method","headers","fetch","URLSearchParams","responseOrigin","json","originId","Places","PlaceId","console","log","length","responseDest","destId","response","Quotes","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport './AirportInfo.css';\nimport Flights from './Flights';\n\nfunction AirportInfo() { \n    const [flights,setFlights] = useState([])\n    const [places, setPlaces] = useState([])\n    const [query,setQuery] = useState(\"\")\n    const [destQuery,setDestQuery] = useState(\"\")\n    const [showFlights,setShowFlights] = useState(false)\n\n    function handleSubmit(e) {\n        e.preventDefault()\n        async function fetchMyAPI() {\n            const reqOptions = {\n                method: 'GET',\n                headers: {\n                    \"x-rapidapi-key\": \"9c838d17b0msh9d78bbfa4f324fbp109103jsn16509938ea2e\",\n                    \"x-rapidapi-host\": \"skyscanner-skyscanner-flight-search-v1.p.rapidapi.com\",\n                    \"useQueryString\": true\n                }\n            }\n\n            let responseOrigin = await fetch(\"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/US/USD/en-US/?\" + new URLSearchParams({query: query}), reqOptions)\n            responseOrigin = await responseOrigin.json()\n            let originId = responseOrigin.Places[0].PlaceId\n            // loop through responseOrigin.Places array until get good length\n            console.log(originId)\n            if (originId.length !== 7) {\n                return\n            }\n\n            let responseDest = await fetch(\"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/US/USD/en-US/?\" + new URLSearchParams({query: destQuery}), reqOptions)\n            responseDest = await responseDest.json()\n            let destId = responseDest.Places[0].PlaceId\n            console.log(destId)\n            if (destId.length !== 7) {\n                return\n            }\n\n            // let response = await fetch(\"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/browsedates/v1.0/US/USD/en-US/\" + \"SFO-sky\" + \"/LAX-sky/2021-03-20?inboundpartialdate=2021-03-25\", reqOptions)\n            let response = await fetch(\"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/browsedates/v1.0/US/USD/en-US/\" + originId + \"/\" + destId + \"/2021-03-20?inboundpartialdate=2021-03-25\", reqOptions)\n            response = await response.json()\n            console.log(response)\n            setFlights(response.Quotes)\n            setPlaces(response.Places)\n        }\n        fetchMyAPI()\n        setShowFlights(true)\n        setQuery(\"\")\n        setDestQuery(\"\")\n    }\n\n    return(\n        <div className=\"airportinfo\">\n           <form onSubmit={handleSubmit}>\n                <label htmlFor=\"queryInput\">Origin:</label>\n                <input id=\"queryInput\" value={query} onChange={e => setQuery(e.target.value)} required/>\n                <label htmlFor=\"destQueryInput\">Destination:</label>\n                <input id=\"destQueryInput\" value={destQuery} onChange={e => setDestQuery(e.target.value)} required/>\n                <button className=\"search\">Submit</button>\n                \n           </form>\n           { showFlights ? <Flights flights={flights} places={places}></Flights> : <></>}\n        </div>\n    )\n}\n\nexport default AirportInfo;\n"]},"metadata":{},"sourceType":"module"}